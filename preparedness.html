<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Preparedness Guide</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

<header>
  <h2><a href="index.html" class="logo-link">ReadyNow</a></h2>
  <nav>
    <a href="index.html">Home</a>
    <a href="about.html">About</a>
  </nav>
</header>

<main>
  <h1>Preparedness Guide</h1>

  <p class="section">
    Location: <strong>Quezon City</strong>
  </p>

  <div class="section feature-box">
    <h3>Official Guidance</h3>
    <p id="ai-output">Loading guidance...</p>
  </div>

  <div class="section feature-box">
    <h3>Current Weather (Quezon City)</h3>
    <p id="weather-prep">Loading weather data...</p>
  </div>

  <a href="map.html">
    <button>View Evacuation Map</button>
  </a>
</main>

<footer>
  <p>ReadyNow © 2026</p>
</footer>

<script>
  const params = new URLSearchParams(window.location.search);
  const disaster = params.get("disaster");

  let guidance = "General preparedness guidance from QC DRRMO.";

  if (disaster === "typhoon") {
    guidance = "Monitor weather updates. Prepare Go Bag. Evacuate when advised by QC DRRMO.";
  } else if (disaster === "earthquake") {
    guidance = "Duck, Cover, and Hold. Stay away from windows. Evacuate to designated areas.";
  } else if (disaster === "flood") {
    guidance = "Move to higher ground. Avoid flooded roads. Follow LGU evacuation advisories.";
  } else if (disaster === "fire") {
    guidance = "Evacuate immediately. Do not use elevators. Contact emergency hotlines.";
  } else if (disaster === "landslide") {
    guidance = "Evacuate to safer grounds. Monitor warnings. Avoid landslide-prone areas.";
  }

  document.getElementById("ai-output").innerText = guidance;

  // WEATHER QC ONLY
  fetch(
    `https://api.openweathermap.org/data/2.5/weather?q=Quezon City,PH&units=metric&appid=YOUR_API_KEY`
  )
    .then(response => response.json())
    .then(data => {
      if (data.main) {
        document.getElementById("weather-prep").innerText =
          `Temperature: ${data.main.temp}°C | Condition: ${data.weather[0].description}`;
      } else {
        document.getElementById("weather-prep").innerText = "Weather data unavailable.";
      }
    })
    .catch(() => {
      document.getElementById("weather-prep").innerText = "Unable to load weather data.";
    });
</script>

</body>
</html>