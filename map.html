<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Evacuation Map</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

<header>
  <h2>ReadyNow</h2>
  <nav>
    <a href="index.html">Home</a>
    <a href="about.html">About</a>
  </nav>
</header>

<main>
  <h1>Evacuation Map</h1>

  <div class="section feature-box">
  <h3>Current Weather</h3>
  <p id="weather-map">Loading weather data...</p>
</div>

  <div class="section feature-box">
  <iframe
    id="map-frame"
    width="100%"
    height="300"
    style="border:0;"
    loading="lazy">
  </iframe>
</div>

  <div class="section feature-box">
  <h3>Evacuation Centers Near You</h3>
  <ul id="evacuation-list">
    <li>Loading evacuation centers...</li>
  </ul>
</div>

<div class="section feature-box">
  <h3>Barangay Advisory</h3>
  <p id="barangay-message">
    Please follow official instructions from your barangay and local authorities.
  </p>
</div>

</main>

<footer>
  <p>ReadyNow © 2026</p>
</footer>

<script>
  const params = new URLSearchParams(window.location.search);
  const city = params.get("city") || "Philippines";

  const mapFrame = document.getElementById("map-frame");
  mapFrame.src =
    "https://www.google.com/maps?q=" +
    encodeURIComponent(city + " evacuation center") +
    "&output=embed";

  const evacuationData = {
  "Manila": [
    "Rizal Memorial Sports Complex",
    "Manila City Hall Evacuation Area",
    "Barangay 176 Multi-purpose Hall"
  ],
  "Quezon City": [
    "Quezon City Memorial Circle",
    "Batasan Hills National High School",
    "Barangay Commonwealth Hall"
  ],
  "Makati": [
    "University of Makati Gym",
    "Makati City Hall Evacuation Area"
  ],
  "Cebu City": [
    "Cebu City Sports Center",
    "Abellana National School Gym",
    "Barangay Luz Covered Court"
  ],
  "Iloilo City": [
    "Iloilo Sports Complex",
    "Iloilo National High School Gym"
  ],
  "Tacloban": [
    "Tacloban City Convention Center",
    "Astrodome Evacuation Area"
  ],
  "Davao City": [
    "Davao City National High School Gym",
    "Mintal Evacuation Center",
    "Talomo Barangay Hall"
  ]
};

  const list = document.getElementById("evacuation-list");
  list.innerHTML = "";

  if (evacuationData[city]) {
    evacuationData[city].forEach(place => {
      const li = document.createElement("li");
      li.textContent = place;
      list.appendChild(li);
    });
  } else {
    const li = document.createElement("li");
    li.textContent = "Please check with your barangay for designated evacuation centers.";
    list.appendChild(li);
  }

  document.getElementById("barangay-message").innerText =
    "Always follow announcements and evacuation instructions issued by your barangay and local government unit (LGU).";

// WEATHER (Map Page)
const weatherMap = document.getElementById("weather-map");

fetch(
  `https://api.openweathermap.org/data/2.5/weather?q=${city},PH&units=metric&appid=585f6af2cbff1e00738777e8c9af0136`
)
  .then(response => response.json())
  .then(data => {
    if (data.main) {
      weatherMap.innerText =
        `Temperature: ${data.main.temp}°C | Condition: ${data.weather[0].description}`;
    } else {
      weatherMap.innerText = "Weather data unavailable.";
    }
  })
  .catch(() => {
    weatherMap.innerText = "Unable to load weather data.";
  });

</script>

<p style="font-size: 14px; color: #666;">
  Note: Listed evacuation centers are examples. Always confirm with your barangay or LGU.
</p>

</body>
</html>