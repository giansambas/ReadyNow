<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Evacuation Map – ReadyNow</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<header>
  <h2 onclick="window.location.href='index.html'" style="cursor:pointer;">
    ReadyNow
  </h2>
</header>

<main>
<h1>Evacuation Map</h1>

<div class="card">
  <h3>Current Weather – Quezon City</h3>
  <p id="weather">Loading...</p>
</div>

<div class="card">
  <iframe
    id="mapFrame"
    width="100%"
    height="400"
    style="border:0"
    loading="lazy">
  </iframe>
</div>

<div class="card">
  <h3>Evacuation Facilities</h3>
  <ul id="facilityList"></ul>
</div>

</main>

<script>

const params = new URLSearchParams(window.location.search);
const barangay = params.get("barangay");

// WEATHER
fetch("https://api.openweathermap.org/data/2.5/weather?q=Quezon City,PH&units=metric&appid=585f6af2cbff1e00738777e8c9af0136")
.then(res => res.json())
.then(data => {
  document.getElementById("weather").innerText =
    `Temperature: ${data.main.temp}°C | Condition: ${data.weather[0].description}`;
});

// MAP
document.getElementById("mapFrame").src =
  `https://www.google.com/maps?q=${encodeURIComponent(barangay + ", Quezon City")}&output=embed`;

</script>

</body>
</html>